import{a as D,b as f,c as N,d as L,e as j,g as _,i as T,l as P,m as G,w as M}from"./chunk-BA4ST442.js";import{k as R,l as A,p as Y,q as S,r as q}from"./chunk-VGTTCDMY.js";import{Bb as C,Ea as d,Fa as x,Fb as h,Sa as g,Ua as u,_ as I,ab as r,bb as o,cb as c,dc as k,e as B,fc as E,hb as F,ib as b,mc as U,tb as m}from"./chunk-MEK6ZYR6.js";var w=B(Y());var V=(i,s,t)=>({"border-2 border-[#a14b4b]":i,"border-2 border-red-500":s,"border-2 border-gray-200":t});function z(i,s){i&1&&(r(0,"p",22)(1,"span",23),m(2,"\u2718"),o(),m(3," Email is required "),o())}function H(i,s){i&1&&(r(0,"p",22)(1,"span",23),m(2,"\u2718"),o(),m(3," Enter a valid email "),o())}function J(i,s){if(i&1&&(r(0,"div",20),g(1,z,4,0,"p",21)(2,H,4,0,"p",21),o()),i&2){let t,e,n=b();d(),u("ngIf",!((t=n.loginForm.get("email"))!=null&&t.value)),d(),u("ngIf",((e=n.loginForm.get("email"))==null?null:e.hasError("email"))&&((e=n.loginForm.get("email"))==null?null:e.value))}}function K(i,s){i&1&&(r(0,"p",22)(1,"span",23),m(2,"\u2718"),o(),m(3," Password is required "),o())}function Q(i,s){if(i&1&&(r(0,"div",20),g(1,K,4,0,"p",21),o()),i&2){let t,e=b();d(),u("ngIf",!((t=e.loginForm.get("password"))!=null&&t.value))}}var O=class i{constructor(s,t){this._Router=s;this._UserAuthService=t}loginForm=new j({email:new _("",[f.required,f.email]),password:new _("",[f.required])});ngOnInit(){this._UserAuthService.isUserLogin.getValue()&&this._Router.navigate(["/home"]),localStorage.getItem("token")&&localStorage.removeItem("token")}login(){let s={email:this.loginForm.get("email")?.value||"",password:this.loginForm.get("password")?.value||""};this._UserAuthService.login(s).subscribe({next:t=>{if(t&&t.token){localStorage.setItem("token",t.token),this._UserAuthService.isUserLogin.next(!0);let n=S(t.token).Role,l;switch(n){case"Customer":l="/home";break;case"Admin":l="/adminDashboard";break;case"DeliveryRep":l="/deliveryDashboard";break;case"Merchant":l="/merchantDashboard";break;default:l="/home"}w.default.fire({title:"Login Successful",text:"You have been logged in successfully",icon:"success",showConfirmButton:!0}).then(()=>{let a=localStorage.getItem("token")||"";if(a){let $=S(a).ID;this._UserAuthService.ProfileInfo($).subscribe({next:y=>{this._UserAuthService.profilePicture.next(`${y.image}?v=${Date.now()}`);let v=localStorage.getItem("returnUrl");localStorage.removeItem("returnUrl"),this._Router.navigate([v||l])},error:y=>{this._UserAuthService.profilePicture.next("https://img.freepik.com/premium-vector/person-icon_109161-4674.jpg");let v=localStorage.getItem("returnUrl");localStorage.removeItem("returnUrl"),this._Router.navigate([v||l])}})}else{let p=localStorage.getItem("returnUrl");localStorage.removeItem("returnUrl"),this._Router.navigate([p||l])}})}},error:t=>{w.default.fire({icon:"error",title:"Login Failed",text:t.error.message||"Invalid email or password"})}})}static \u0275fac=function(t){return new(t||i)(x(R),x(q))};static \u0275cmp=I({type:i,selectors:[["app-sign-in"]],standalone:!0,features:[C],decls:29,vars:14,consts:[[1,"mx-auto","px-4","py-8","sm:px-6","lg:px-8","bg-gradient-to-br","from-[#703232]/10","via-[#a14b4b]/10","to-[#703232]/10","animate-gradient"],[1,"flex","justify-center","gap-14","mitems-center","max-w-7xl","h-[450px]"],[1,"img","hidden","md:block","relative"],["src","./assets/image.png","alt","Login Illustration","loading","eager",1,"h-full","object-cover","rounded-2xl","shadow-2xl","transform","transition-transform","duration-300"],[1,"flex","flex-col","justify-center","bg-white/10","backdrop-blur-lg","p-8","rounded-2xl","shadow-2xl","sm:max-w-md","w-full","form-container","border","border-white/20"],[1,"sm:mx-auto","sm:w-full"],[1,"text-4xl","font-extrabold","text-gray-900","text-center","bg-clip-text","text-transparent","bg-gradient-to-r","from-[#703232]","to-[#a14b4b]"],[1,"mt-2","text-base","text-gray-700","text-center"],[1,"mt-6","sm:mx-auto","sm:w-full"],[1,"flex","flex-col","gap-6",3,"ngSubmit","formGroup"],["type","email","placeholder","Email Address","formControlName","email",1,"appearance-none","block","w-full","px-4","py-3","bg-white/50","rounded-xl","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-4","focus:ring-[#a14b4b]/50","transition-all","duration-300","shadow-md",3,"ngClass"],["class","mt-2 text-sm",4,"ngIf"],["type","password","autocomplete","current-password","placeholder","Password","formControlName","password",1,"appearance-none","block","w-full","px-4","py-3","bg-white/50","rounded-xl","text-gray-900","placeholder-gray-500","focus:outline-none","focus:ring-4","focus:ring-[#a14b4b]/50","transition-all","duration-300","shadow-md",3,"ngClass"],[1,"text-md"],["routerLink","/forget-email",1,"font-medium","text-[#703232]","hover:text-[#5b2929]","transition-colors","duration-200","block","text-right"],[1,"flex","justify-end"],[1,"w-full","flex","cursor-pointer","justify-center","py-4","px-8","border","border-transparent","text-xl","font-bold","rounded-xl","text-white","bg-gradient-to-r","from-[#703232]","to-[#a14b4b]","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"text-center"],[1,"text-gray-700"],["routerLink","/signup",1,"text-[#703232]","font-bold","hover:text-[#5b2929]","underline","transition-colors","duration-200"],[1,"mt-2","text-sm"],["class","text-red-500",4,"ngIf"],[1,"text-red-500"],[1,"inline-block","w-4"]],template:function(t,e){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),c(3,"img",3),o(),r(4,"div",4)(5,"div",5)(6,"h2",6),m(7," Log in to Exclusive "),o(),r(8,"p",7),m(9," Enter your details below "),o()(),r(10,"div",8)(11,"form",9),F("ngSubmit",function(){return e.login()}),r(12,"div"),c(13,"input",10),g(14,J,3,2,"div",11),o(),r(15,"div"),c(16,"input",12),g(17,Q,2,1,"div",11),o(),r(18,"div",13)(19,"a",14),m(20," Forgot your password? "),o()(),r(21,"div",15)(22,"button",16),m(23," Login "),o()(),r(24,"div",17)(25,"p",18),m(26," Don't have an account? "),r(27,"a",19),m(28," Sign up "),o()()()()()()()()),t&2){let n,l,a,p;d(11),u("formGroup",e.loginForm),d(2),u("ngClass",h(6,V,((n=e.loginForm.get("email"))==null?null:n.valid)&&((n=e.loginForm.get("email"))==null?null:n.touched),((n=e.loginForm.get("email"))==null?null:n.invalid)&&((n=e.loginForm.get("email"))==null?null:n.touched),!((n=e.loginForm.get("email"))!=null&&n.touched))),d(),u("ngIf",((l=e.loginForm.get("email"))==null?null:l.invalid)&&((l=e.loginForm.get("email"))==null?null:l.touched)),d(2),u("ngClass",h(10,V,((a=e.loginForm.get("password"))==null?null:a.valid)&&((a=e.loginForm.get("password"))==null?null:a.touched),((a=e.loginForm.get("password"))==null?null:a.invalid)&&((a=e.loginForm.get("password"))==null?null:a.touched),!((a=e.loginForm.get("password"))!=null&&a.touched))),d(),u("ngIf",((p=e.loginForm.get("password"))==null?null:p.invalid)&&((p=e.loginForm.get("password"))==null?null:p.touched)),d(5),u("disabled",!e.loginForm.valid)}},dependencies:[A,U,k,E,M,T,D,N,L,P,G]})};export{O as SignInComponent};
