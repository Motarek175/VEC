<!-- Loading State -->
<div
  *ngIf="loading()"
  class="flex items-center justify-center min-h-screen bg-white"
>
  <div
    class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-[#a14b4b]"
  ></div>
</div>

<!-- Profile Content -->
<div
  class="mx-auto px-4 py-12 sm:px-6 lg:px-8 min-h-screen flex items-center justify-center bg-white"
  *ngIf="!loading()"
>
  <div
    class="bg-white/20 backdrop-blur-md p-6 md:p-8 rounded-2xl shadow-xl w-full max-w-3xl border border-gray-200 transform transition-all duration-300 hover:shadow-2xl"
    *ngIf="profileInfo; else noDataTemplate"
  >
    <h2
      class="text-3xl md:text-4xl font-bold text-center text-gray-800 bg-clip-text text-transparent bg-gradient-to-r from-[#703232] to-[#a14b4b] mb-8"
    >
      My Profile
    </h2>

    <!-- Profile Image with Edit Icon -->
    <div class="relative w-36 h-36 md:w-48 md:h-48 mx-auto mb-6">
      <img
        [src]="userAuthService.profilePicture | async"
        alt="Profile Image"
        class="w-full h-full object-cover rounded-full border-4 border-[#a14b4b]/30 shadow-md transition-transform duration-300 hover:scale-105"
      />
      <label
        for="imageInput"
        class="absolute bottom-2 right-2 bg-[#a14b4b]/70 text-white rounded-full p-2 cursor-pointer hover:bg-[#703232] transition-colors duration-200"
      >
        <i class="fas fa-pencil-alt"></i>
      </label>
      <input
        type="file"
        id="imageInput"
        (change)="onImageSelected($event)"
        accept="image/*"
        class="hidden"
      />
    </div>

    <!-- Profile Details in Two Columns -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
      <div
        class="p-4 bg-white/10 rounded-lg shadow-md hover:bg-white/20 transition-colors duration-200"
      >
        <span class="text-gray-700 font-medium">Name:</span>
        <span class="text-gray-900 font-semibold ml-2">{{
          profileInfo.name || "Not provided"
        }}</span>
      </div>
      <div
        class="p-4 bg-white/10 rounded-lg shadow-md hover:bg-white/20 transition-colors duration-200"
      >
        <span class="text-gray-700 font-medium">Email:</span>
        <span class="text-gray-900 font-semibold ml-2">{{
          profileInfo.email || "Not provided"
        }}</span>
      </div>
      <div
        class="p-4 bg-white/10 rounded-lg shadow-md hover:bg-white/20 transition-colors duration-200"
      >
        <span class="text-gray-700 font-medium">Phone:</span>
        <span class="text-gray-900 font-semibold ml-2">{{
          profileInfo.phone || "Not provided"
        }}</span>
      </div>
      <div
        class="p-4 bg-white/10 rounded-lg shadow-md hover:bg-white/20 transition-colors duration-200"
      >
        <span class="text-gray-700 font-medium">Governorate:</span>
        <span class="text-gray-900 font-semibold ml-2">{{
          profileInfo.governorate || "Not provided"
        }}</span>
      </div>
      <div
        class="p-4 bg-white/10 rounded-lg shadow-md hover:bg-white/20 transition-colors duration-200"
      >
        <span class="text-gray-700 font-medium">Location:</span>
        <span class="text-gray-900 font-semibold ml-2">{{
          profileInfo.location || "Not provided"
        }}</span>
      </div>
      <div
        class="p-4 bg-white/10 rounded-lg shadow-md hover:bg-white/20 transition-colors duration-200"
      >
        <span class="text-gray-700 font-medium">State:</span>
        <span class="text-gray-900 font-semibold ml-2">{{
          profileInfo.state || "Not provided"
        }}</span>
      </div>
    </div>
  </div>

  <ng-template #noDataTemplate>
    <div class="text-center text-gray-600 p-6 bg-white/10 rounded-xl shadow-md">
      <p>No profile data available.</p>
    </div>
  </ng-template>
</div>
