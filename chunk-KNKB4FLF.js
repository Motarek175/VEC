import{a as F}from"./chunk-I2CVAPWO.js";import{i as k,k as T,l as N,p as P,q as D,r as A}from"./chunk-VGTTCDMY.js";import{Bb as w,Db as S,Ea as s,Fa as m,Fb as I,Na as c,Sa as g,Ua as d,_ as x,ab as i,bb as t,cb as u,dc as _,e as j,ec as C,fc as O,ga as f,gb as b,ha as h,hb as y,ib as p,mc as E,tb as o,vb as l}from"./chunk-MEK6ZYR6.js";var R=j(P());var L=(r,n,e)=>({"bg-green-100 text-green-800":r,"bg-orange-100 text-orange-700":n,"bg-yellow-100 text-yellow-700":e}),U=r=>["/order-details",r];function z(r,n){r&1&&(i(0,"div",9),u(1,"div",10),t())}function V(r,n){if(r&1&&(i(0,"div",11),o(1),t()),r&2){let e=p();s(),l(" ",e.errorMessage()," ")}}function B(r,n){if(r&1&&(i(0,"div",14)(1,"div",15)(2,"h2",16),o(3),t(),i(4,"p",17),o(5),t()(),i(6,"div",18)(7,"div",19)(8,"p",20)(9,"strong",21),o(10,"Status:"),t(),i(11,"span",22),o(12),t()(),i(13,"p",23)(14,"strong"),o(15,"Address:"),t(),o(16),t(),i(17,"p",23)(18,"strong"),o(19,"Phone:"),t(),o(20),t(),i(21,"p",23)(22,"strong"),o(23,"Delivered by:"),t(),o(24),t()()(),i(25,"div",24)(26,"a",25),o(27," View Details "),t()()()),r&2){let e=n.$implicit;s(3),l(" Order #",e.orderId," "),s(2),l(" Placed by: ",e.userName," "),s(6),d("ngClass",I(8,L,e.status==="Recieved",e.status==="OnWay",e.status==="Pending")),s(),l(" ",e.status," "),s(4),l(" ",e.address," "),s(4),l(" ",e.phone," "),s(4),l(" ",e.deliveryName," "),s(2),d("routerLink",S(12,U,e.orderId))}}function G(r,n){if(r&1&&(i(0,"div",12),g(1,B,28,14,"div",13),t()),r&2){let e=p();s(),d("ngForOf",e.orders())}}function W(r,n){if(r&1){let e=b();i(0,"div",26)(1,"div",27),u(2,"div",28),i(3,"p",29),o(4," No orders found. "),t(),i(5,"p",30),o(6," Start shopping to see your orders here! "),t()(),i(7,"button",31),y("click",function(){f(e);let v=p();return h(v.router.navigate(["/shop"]))}),o(8," Go to Shop "),t()()}}var M=class r{constructor(n,e,a,v){this.route=n;this.customerService=e;this.userAuthService=a;this.router=v}errorMessage=c("");loading=c(!0);customerId="";customerPersonName="";decodedToken;loginSubscription=null;orders=c([]);ngOnInit(){if(!this.userAuthService.isUserLogin.value){R.default.fire({icon:"info",title:"Not Logged In",text:"You need to log in to view your orders. Would you like to log in now?",confirmButtonText:"Log In",showCancelButton:!0,cancelButtonText:"Go to Home"}).then(e=>{if(e.isConfirmed){let a=this.router.url;localStorage.setItem("returnUrl",a),this.router.navigate(["/login"])}else this.router.navigate(["/home"])}),this.loading.set(!1);return}let n=localStorage.getItem("token")||"";n?(this.decodedToken=D(n),this.customerPersonName=this.decodedToken.Name,this.customerId=this.decodedToken.ID,this.loadOrders()):(this.customerId="",this.customerPersonName="",this.loading.set(!1))}ngOnDestroy(){this.loginSubscription&&this.loginSubscription.unsubscribe()}loadOrders(){this.loading.set(!0),this.customerService.showCustomerOrders(this.customerId).subscribe({next:n=>{this.orders.set(n),this.loading.set(!1)},error:n=>{this.errorMessage.set("Failed to load orders: "+n.message),this.loading.set(!1)}})}static \u0275fac=function(e){return new(e||r)(m(k),m(F),m(A),m(T))};static \u0275cmp=x({type:r,selectors:[["app-orders"]],standalone:!0,features:[w],decls:11,vars:4,consts:[[1,"min-h-screen","bg-white","p-4","md:p-6","lg:p-8"],[1,"text-center","mb-12","relative","overflow-hidden"],[1,"absolute","inset-0","bg-[var(--main-color)]/10","transform","-skew-y-6","-z-10"],[1,"text-4xl","md:text-5xl","lg:text-6xl","font-extrabold","text-gray-800","bg-[var(--main-color)]","bg-clip-text","text-transparent","relative","z-10"],[1,"text-gray-600","mt-4","text-lg","md:text-xl","animate-fade-in-slow"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","text-center text-red-600 font-semibold p-5 bg-red-50 rounded-xl shadow-xl border-l-4 border-red-500 transform transition-all duration-500 hover:scale-105",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","text-center py-20",4,"ngIf"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin-slow","rounded-full","h-20","w-20","border-t-4","border-b-4","border-[var(--main-color)]","shadow-lg"],[1,"text-center","text-red-600","font-semibold","p-5","bg-red-50","rounded-xl","shadow-xl","border-l-4","border-red-500","transform","transition-all","duration-500","hover:scale-105"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-2xl shadow-2xl overflow-hidden transform transition-all duration-500 hover:-translate-y-3 hover:shadow-4xl hover:rotate-1",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","shadow-2xl","overflow-hidden","transform","transition-all","duration-500","hover:-translate-y-3","hover:shadow-4xl","hover:rotate-1"],[1,"bg-[var(--main-color)]","p-5"],[1,"text-xl","md:text-2xl","font-bold","text-white","drop-shadow-md"],[1,"text-sm","md:text-base","text-gray-100"],[1,"p-5"],[1,"space-y-3"],[1,"text-gray-800","text-lg"],[1,"text-[var(--main-color)]"],[1,"ml-2","px-2","py-1","rounded-full","text-sm","font-medium",3,"ngClass"],[1,"text-gray-700","text-base"],[1,"p-5","bg-gray-50","border-t","border-gray-200"],[1,"w-full","bg-[var(--main-color)]","text-white","py-3","rounded-lg","font-semibold","text-lg","hover:bg-opacity-90","transition-all","duration-500","transform","hover:scale-110","block","text-center","shadow-md","hover:shadow-lg",3,"routerLink"],[1,"text-center","py-20"],[1,"relative"],[1,"absolute","inset-0","bg-[var(--main-color)]/5","rounded-full","blur-md","-z-10","animate-pulse-slow"],[1,"text-3xl","md:text-4xl","text-gray-600","font-bold","relative","z-10"],[1,"text-gray-500","mt-3","text-base","md:text-lg","relative","z-10"],[1,"mt-6","bg-[var(--main-color)]","text-white","py-3","px-8","rounded-lg","text-lg","font-semibold","hover:bg-opacity-90","transition-all","duration-500","transform","hover:scale-110","shadow-md","hover:shadow-lg",3,"click"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1),u(2,"div",2),i(3,"h1",3),o(4," My Orders "),t(),i(5,"p",4),o(6," Track all your purchases with elegance and style "),t()(),g(7,z,2,0,"div",5)(8,V,2,1,"div",6)(9,G,2,1,"div",7)(10,W,9,0,"div",8),t()),e&2&&(s(7),d("ngIf",a.loading()),s(),d("ngIf",a.errorMessage()),s(),d("ngIf",!a.loading()&&a.orders().length>0),s(),d("ngIf",!a.loading()&&a.orders().length===0))},dependencies:[E,_,C,O,N]})};export{M as OrdersComponent};
