import{a as k}from"./chunk-I2CVAPWO.js";import{i as O,k as w,p as M,q as N,r as T}from"./chunk-VGTTCDMY.js";import{Bb as S,Ea as n,Fa as c,Fb as y,Na as p,Sa as g,Ua as m,_ as x,ab as r,bb as e,cb as h,dc as E,e as F,ec as D,fc as _,ga as v,gb as b,ha as f,hb as I,ib as u,mc as C,tb as t,vb as l}from"./chunk-MEK6ZYR6.js";var A=F(M());var j=(d,o,i)=>({"bg-green-100 text-green-700":d,"bg-yellow-100 text-yelbg-yellow-700":o,"bg-orange-100 text-orange-700":i});function R(d,o){d&1&&(r(0,"div",7),h(1,"div",8),e())}function U(d,o){if(d&1&&(r(0,"div",9),t(1),e()),d&2){let i=u();n(),l(" ",i.errorMessage()," ")}}function B(d,o){if(d&1&&(r(0,"div",19)(1,"h3",20),t(2),e(),r(3,"div",13)(4,"p",14)(5,"strong"),t(6,"Product ID:"),e(),t(7),e(),r(8,"p",14)(9,"strong"),t(10,"Name:"),e(),t(11),e(),r(12,"p",14)(13,"strong"),t(14,"Color:"),e(),t(15),e(),r(16,"p",14)(17,"strong"),t(18,"Size:"),e(),t(19),e(),r(20,"p",14)(21,"strong"),t(22,"Quantity:"),e(),t(23),e(),r(24,"p",14)(25,"strong"),t(26,"Status:"),e(),r(27,"span",21),t(28),e()()()()),d&2){let i=o.$implicit,a=o.index,s=u().ngIf;n(2),l(" Product ",a+1," "),n(5),l(" ",i," "),n(4),l(" ",s.productsName[a]," "),n(4),l(" ",s.color[a]," "),n(4),l(" ",s.size[a]," "),n(4),l(" ",s.quantity[a]," "),n(4),m("ngClass",y(8,j,s.status[a]==="Recieved",s.status[a]==="Pending",s.status[a]==="OnWay")),n(),l(" ",s.status[a]," ")}}function z(d,o){if(d&1){let i=b();r(0,"div",10)(1,"div",11)(2,"h2",12),t(3," Order Summary "),e(),r(4,"div",13)(5,"p",14)(6,"strong"),t(7,"Order ID:"),e(),t(8),e(),r(9,"p",14)(10,"strong"),t(11,"Username:"),e(),t(12),e(),r(13,"p",14)(14,"strong"),t(15,"Address:"),e(),t(16),e(),r(17,"p",14)(18,"strong"),t(19,"Phone:"),e(),t(20),e(),r(21,"p",14)(22,"strong"),t(23,"Delivered by:"),e(),t(24),e(),r(25,"p",14)(26,"strong"),t(27,"Total Price:"),e(),t(28),e()()(),r(29,"div",15)(30,"h2",12),t(31,"Products"),e(),r(32,"div",10),g(33,B,29,12,"div",16),e()(),r(34,"div",17)(35,"button",18),I("click",function(){v(i);let s=u();return f(s.router.navigate(["/orders"]))}),t(36," Back to Orders "),e()()()}if(d&2){let i=o.ngIf;n(8),l(" ",i.orderId," "),n(4),l(" ",i.userName," "),n(4),l(" ",i.address," "),n(4),l(" ",i.phone,""),n(4),l(" ",i.deliveryName," "),n(4),l(" $",i.totalPrice.toFixed(2)," "),n(5),m("ngForOf",i.productId)}}var P=class d{constructor(o,i,a,s){this.route=o;this.customerService=i;this.userAuthService=a;this.router=s;this.orderId=+this.route.snapshot.paramMap.get("orderId")}errorMessage=p("");loading=p(!0);customerId="";customerPersonName="";decodedToken;loginSubscription=null;orderDetail=p(null);orderId;ngOnInit(){if(!this.userAuthService.isUserLogin.value){A.default.fire({icon:"info",title:"Not Logged In",text:"You need to log in to view order details. Would you like to log in now?",confirmButtonText:"Log In",showCancelButton:!0,cancelButtonText:"Go to Home"}).then(i=>{if(i.isConfirmed){let a=this.router.url;localStorage.setItem("returnUrl",a),this.router.navigate(["/login"])}else this.router.navigate(["/home"])}),this.loading.set(!1);return}let o=localStorage.getItem("token")||"";o?(this.decodedToken=N(o),this.customerPersonName=this.decodedToken.Name,this.customerId=this.decodedToken.ID,this.loadOrderDetails()):(this.customerId="",this.customerPersonName="",this.loading.set(!1))}ngOnDestroy(){this.loginSubscription&&this.loginSubscription.unsubscribe()}loadOrderDetails(){this.loading.set(!0),this.customerService.getCustomerOrderDetails(this.orderId).subscribe({next:o=>{this.orderDetail.set(o),this.loading.set(!1)},error:o=>{this.errorMessage.set("Failed to load order details: "+o.message),this.loading.set(!1)}})}static \u0275fac=function(i){return new(i||d)(c(O),c(k),c(T),c(w))};static \u0275cmp=x({type:d,selectors:[["app-order-details"]],standalone:!0,features:[S],decls:9,vars:3,consts:[[1,"min-h-screen","p-4","md:p-6","lg:p-8"],[1,"text-center","mb-12","relative","overflow-hidden"],[1,"text-4xl","md:text-5xl","lg:text-6xl","font-extrabold","text-gray-800","bg-[var(--main-color)]","bg-clip-text","text-transparent","relative","z-10"],[1,"text-gray-600","mt-4","text-lg","md:text-xl","animate-fade-in-slow"],["class","flex justify-center items-center h-64",4,"ngIf"],["class","text-center text-red-600 font-semibold p-5 bg-red-50 rounded-xl shadow-xl border-l-4 border-red-500 transform transition-all duration-500 hover:scale-105",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"flex","justify-center","items-center","h-64"],[1,"animate-spin-slow","rounded-full","h-20","w-20","border-t-4","border-b-4","border-[var(--main-color)]","shadow-lg"],[1,"text-center","text-red-600","font-semibold","p-5","bg-red-50","rounded-xl","shadow-xl","border-l-4","border-red-500","transform","transition-all","duration-500","hover:scale-105"],[1,"space-y-6"],[1,"bg-white","rounded-2xl","shadow-2xl","p-6","transform","transition-all","duration-500","hover:-translate-y-2"],[1,"text-2xl","font-bold","text-[var(--main-color)]","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,"text-gray-700"],[1,"rounded-2xl","p-6","transform","transition-all","duration-500"],["class","bg-gray-50 rounded-xl p-4 border border-gray-200 transform transition-all duration-300 hover:shadow-md",4,"ngFor","ngForOf"],[1,"text-center","mt-8"],[1,"bg-[var(--main-color)]","text-white","py-3","px-8","rounded-lg","text-lg","font-semibold","hover:bg-opacity-90","transition-all","duration-500","transform","hover:scale-110","shadow-md","hover:shadow-lg",3,"click"],[1,"bg-gray-50","rounded-xl","p-4","border","border-gray-200","transform","transition-all","duration-300","hover:shadow-md"],[1,"text-lg","font-semibold","text-gray-800","mb-3"],[1,"px-2","py-1","rounded-full","text-sm","font-medium",3,"ngClass"]],template:function(i,a){i&1&&(r(0,"div",0)(1,"div",1)(2,"h1",2),t(3," Order Details "),e(),r(4,"p",3),t(5," Detailed view of your order "),e()(),g(6,R,2,0,"div",4)(7,U,2,1,"div",5)(8,z,37,7,"div",6),e()),i&2&&(n(6),m("ngIf",a.loading()),n(),m("ngIf",a.errorMessage()),n(),m("ngIf",a.orderDetail()))},dependencies:[C,E,D,_]})};export{P as OrderDetailsComponent};
